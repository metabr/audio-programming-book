//
//  RemoteIO.h
//  Spectral Template
//
//  Created by Johannes Bochmann on 15.04.09.
//  Copyright 2009 JoboMusic GmbH. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "InMemoryAudioFile.h"
#import "globals.h"


@interface RemoteIO : NSObject {
	InMemoryAudioFile *inMemoryAudiofile;
	
	float *channel1InputSampleBuffer;
	float *channel2InputSampleBuffer;
	float *channel1OutputSampleBuffer;
	float *channel2OutputSampleBuffer;
	float *channel1MagnitudePhasesBuffer;
	float *channel2MagnitudePhasesBuffer;

	int currentInputSampleBufferIndex;
	
	UInt16 currentIntSample;
	float currentFloatSample;
	float *fftWindow;
	float **channel1MagnitudeMatrix;
	int currentMatrixColumn;
	float offset;
	float highest;
}

@property (nonatomic, retain) InMemoryAudioFile *inMemoryAudiofile;
@property (readonly, nonatomic) float **channel1MagnitudeMatrix;

-(id)initWithFile:(NSString *)file;
-(OSStatus)start;
-(OSStatus)stop;
-(void)cleanUp;
-(void)initializeAudio;
-(float)convertInt16ToNormalizedFloat:(UInt16) input;
-(UInt16)convertNormalizedFloatToInt16:(float) input;



@end
